const fetch = (...args) => import('node-fetch').then(({default: fetch}) => fetch(...args));

async function testNewsletterRemoval() {
  console.log('๐ ุงุฎุชุจุงุฑ ุฅุฒุงูุฉ ูุณู ุงููุดุฑุฉ ุงูุฅุฎุจุงุฑูุฉ...\n');

  try {
    // ุฌูุจ ูุญุชูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
    console.log('๐ ุฌูุจ ูุญุชูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ...');
    const response = await fetch('http://localhost:3001');
    const html = await response.text();
    
    // ุงูุจุญุซ ุนู ุงููุตูุต ุงููุทููุจ ุฅุฒุงูุชูุง
    const newsletterTexts = [
      'ุงุญุตู ุนูู ุนุฑูุถ ุญุตุฑูุฉ',
      'ุงุดุชุฑู ูู ูุดุฑุชูุง ุงูุฅุฎุจุงุฑูุฉ',
      'ุงุญุตู ุนูู ุฎุตู 10% ุนูู ุทูุจู ุงูุฃูู',
      'ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู',
      'ุงุดุชุฑุงู'
    ];
    
    console.log('๐ ุงูุจุญุซ ุนู ุงููุตูุต ูู ุงูุตูุญุฉ...');
    let foundTexts = 0;
    
    newsletterTexts.forEach(text => {
      if (html.includes(text)) {
        console.log(`โ ูุฌุฏ: "${text}"`);
        foundTexts++;
      } else {
        console.log(`โ ูู ูุฌุฏ: "${text}"`);
      }
    });
    
    if (foundTexts === 0) {
      console.log('\nโ ุชู ุฅุฒุงูุฉ ูุณู ุงููุดุฑุฉ ุงูุฅุฎุจุงุฑูุฉ ุจูุฌุงุญ!');
      console.log('๐ ููุฎุต ุงูุชุบููุฑุงุช:');
      console.log('- ุชู ุฅุฒุงูุฉ ูุณู "ุงุญุตู ุนูู ุนุฑูุถ ุญุตุฑูุฉ"');
      console.log('- ุชู ุฅุฒุงูุฉ ุญูู ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู');
      console.log('- ุชู ุฅุฒุงูุฉ ุฒุฑ "ุงุดุชุฑุงู"');
      console.log('- ุชู ุฅุฒุงูุฉ ุฃููููุฉ Gift ูู ุงูุงุณุชูุฑุงุฏุงุช');
      console.log('- ุชู ุชูุธูู ุงูููุฏ ูู ุงูุนูุงุตุฑ ุบูุฑ ุงููุณุชุฎุฏูุฉ');
    } else {
      console.log(`\nโ ูุง ูุฒุงู ููุงู ${foundTexts} ูุต ููุฌูุฏ ูู ุงูุตูุญุฉ`);
    }
    
    // ุงูุชุญูู ูู ุฃู ุงูููุชุฑ ูุง ูุฒุงู ููุฌูุฏ
    if (html.includes('TANAMIRT') && html.includes('ุฌููุน ุงูุญููู ูุญููุธุฉ')) {
      console.log('โ ุงูููุชุฑ ูุง ูุฒุงู ููุฌูุฏ ููุนูู ุจุดูู ุตุญูุญ');
    } else {
      console.log('โ ูุดููุฉ ูู ุงูููุชุฑ');
    }
    
    console.log('\n๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:');
    console.log('- ุชู ุฅุฒุงูุฉ ูุณู ุงููุดุฑุฉ ุงูุฅุฎุจุงุฑูุฉ ุจุงููุงูู');
    console.log('- ุงูุตูุญุฉ ุฃุตุจุญุช ุฃูุซุฑ ุจุณุงุทุฉ ููุธุงูุฉ');
    console.log('- ุงูููุชุฑ ูุธูุฑ ูุจุงุดุฑุฉ ุจุนุฏ ูุณู "ููุงุฐุง ุชุฎุชุงุฑ TANAMIRT"');

  } catch (error) {
    console.error('โ ุฎุทุฃ ูู ุงูุงุฎุชุจุงุฑ:', error.message);
  }
}

testNewsletterRemoval();
